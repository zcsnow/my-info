<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-touch-fullscreen" content="yes">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>run</title>
<script src="jquery.min.js"></script>
<script type="text/javascript">
var x = 0
var thex = -576;
var they = -1044;
var myBoolean = false

function dianwo_down() {
	var obj1 = document.getElementById('map');
	they += 5;
	thex += 5;
	var sx = thex+"px "
	var sy = they+"px"
	obj1.style.backgroundPosition = sx+sy;
}
function dianwo_up() {
	
}
function changeXY() {
	if(myBoolean == true){
		var obj1 = document.getElementById('map');
		they += .5;
		thex += .5;
		var sx = thex+"px "
		var sy = they+"px"
		obj1.style.backgroundPosition = sx+sy;
	}
	
}

function changeBg(){
	var obj = document.getElementById('mydiv');
	if(x == -350){
		x = 0
	}
	else{
		x -= 50
	}
	$(obj).css({backgroundPosition:x+'px'});
}
function setObj(){
	setInterval("changeBg()",100);
	setInterval("changeXY()",1);
	$('.button').on('touchstart',function(e){
		//myBoolean = true
		var obj = document.getElementById('mydiv');
		obj.style.left = obj.offsetLeft + 5 + 'px';
		obj.style.top = obj.offsetTop + 5 + 'px';
		console.log(obj.style.left);
		//dianwo_down();
	});
	$('.button').on('touchend',function(e){
		myBoolean = false
	});
}


function angle(start,end){
	var diff_x = end.x - start.x;
	var diff_y = end.y - start.y;
	return 180*Math.atan(diff_y/diff_x)/(2*Math.PI);
}
</script>
<style>
body, html { padding: 0; margin: 0; width: 100%; height: 100%; overflow: hidden; }
.man { width: 50px; height: 60px; background: url(man.png) no-repeat; background-position: 0px 0px; overflow: hidden; position: absolute; left: 100px; top: 280px; }
.map_class { width: 320px; height: 580px; overflow: hidden; position: absolute; background: url(map1.jpg) no-repeat; /*background-position:-576px -1044px;*/ background-size: cover; left: 0px; top: 0px; }
.button { width: 100%; height: 100%; position: absolute; right: 0px; bottom: 0px; }
</style>
</head>
<body onLoad="setObj();">
  <canvans id="map" class="map_class" ></canvans>
  <div id="mydiv" class="man" ></div>
  <div class="button"></div>
</body>
</html>
